<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Summary Association Statistics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>

    <!-- code for styles for all pages -->
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <!-- sametop bar for all pages -->
    <header class="fixed inset-x-0 top-0 z-50 bg-[#004a6f]">
        <div class="max-w-8xl mx-auto px-4 sm:px-6 lg:px-8 h-12 flex items-center justify-between">
            <img src="ukhd_logo.jpg" alt="logo" class="h-8 w-auto bg-white/70 backdrop-blur shadow-sm select-none" />
            <span
                class="rounded-xl bg-white/70 backdrop-blur px-3 py-1 text-xs font-medium shadow-sm select-none text-center">
                ENG
            </span>
        </div>
    </header>

    <!-- Page Content -->
    <main class="layer max-w-8xl mx-auto px-16 lg:px-12 min-h-screen flex flex-col pt-16">
        <div class="grid grid-cols-12 gap-6 mt-10 flex-grow">
            <!-- nav Sidebar navigation -->
            <nav class="col-span-3 sm:col-span-2 md:col-span-1 mt-6">
                <ul class="space-y-3">
                    <li><a class="btn-nav block w-full text-left px-4 py-2 rounded-xl border border-gray-500 bg-white/70 backdrop-blur hover:bg-white/90 transition shadow-sm"
                            href="index.html">Home</a></li>
                    <li><a class="btn-nav block w-full text-left px-4 py-2 rounded-xl border border-gray-500 bg-white/70 backdrop-blur hover:bg-white/90 transition shadow-sm"
                            href="data.html">Data</a></li>
                    <li><a class="btn-nav block w-full text-left px-4 py-2 rounded-xl border border-gray-500 bg-white/70 backdrop-blur hover:bg-white/90 transition shadow-sm"
                            href="sources.html">Sources</a></li>
                    <li><a class="btn-nav block w-full text-left px-4 py-2 rounded-xl border border-gray-500 bg-white/70 backdrop-blur hover:bg-white/90 transition shadow-sm"
                            href="contact.html">Contact</a></li>
                    <li><a class="btn-nav block w-full text-left px-4 py-2 rounded-xl border border-gray-500 bg-white/70 backdrop-blur hover:bg-white/90 transition shadow-sm"
                            href="about.html">About</a></li>
                </ul>
            </nav>

            <!--Pages: -->
            <section
                class="col-span-8 sm:col-span-9 md:col-span-10 rounded-xl bg-white/40 backdrop-blur border border-gray-500 mt-6 mx-6 shadow-sm">
                <h2 class="text-4xl font-medium leading-tight text-[#004a6f] drop-shadow px-6">Trying out some data:
                </h2>

                <!-- controls: -->
                <div class="p-6 grid gap-3 sm:grid-cols-3">
                    <label class="text-sm">
                        <span class="block mb-1 font-medium text-gray-700">Select group:</span>
                        <select id="groupSelect" class="w-full rounded-lg border border-gray-300 px-3 py-2 bg-white/90">
                            <option value="ALL" selected>ALL</option>
                        </select>
                    </label>

                    <label class="text-sm">
                        <span class="block mb-1 font-medium text-gray-700">Select x-variable:</span>
                        <select id="xSelect" class="w-full rounded-lg border border-gray-300 px-3 py-2 bg-white/90">
                            <option value="x" selected>Variable x</option>
                            <option value="y">Variable y</option>
                        </select>
                    </label>

                    <label class="text-sm">
                        <span class="block mb-1 font-medium text-gray-700">Select y-Variable:</span>
                        <select id="ySelect" class="w-full rounded-lg border border-gray-300 px-3 py-2 bg-white/90">
                            <option value="x">Variable x</option>
                            <option value="y"selected>Var y</option>
                        </select>
                    </label>
                </div>

                <!-- plot -->
                <div id="plot" class="px-6 rounded-xl border border-gray-300 bg-white/70 backdrop-blur mx-6 mt-9"></div>
            </section>
        </div>

        <!-- Footer -->
        <footer class="mt-auto text-center text-xs text-gray-800/80 py-4">
            Â© <span id="year"></span> Summary Association Statistics
        </footer>
    </main>


    <script>
        document.getElementById('year').textContent = new Date().getFullYear();

        //load data
        let raw = [];
        async function loadData() {
            try {
                const res = await fetch('assets/data.json');
                if (!res.ok) throw new Error('HTTP ${res.status}');
                raw = await res.json();

                //populate group select
                const groups = Array.from(new Set(raw.map(d => d.group))).sort();
                const sel = document.getElementById('groupSelect');
                groups.forEach(g => {
                    const option = document.createElement('option');
                    option.value = g;
                    option.textContent = g;
                    sel.appendChild(option);
                });
                draw();
            } catch (error) {
                console.error('Failed to load data.json:', error);
                const plot = document.getElementById('plot');
                if (plot) plot.innerHTML = '<div class="text-red-800">Failed to load data.</div>';
            }
        }

        function getSubset() {
            const g = document.getElementById('groupSelect').value;
            return g === 'ALL' ? raw : raw.filter(d => d.group === g);
        }

        function draw() {
            const data = getSubset();
            const xVar = document.getElementById('xSelect').value;
            const yVar = document.getElementById('ySelect').value;

            const trace = {
                x: data.map(d => +d[xVar]),
                y: data.map(d => +d[yVar]),
                mode: 'markers',
                type: 'scatter',
                marker: { size: 8, color: '#004a6f', opacity: 0.7 },
                text: data.map(d => `id: ${d.id}, group: ${d.group}`)
            };
            const layout = {
                margin: { t: 20, r: 20, b: 40, l: 50 },
                xaxis: { title: xVar },
                yaxis: { title: yVar },
                hovermode: 'closest',
                height: 400,
                plot_bgcolor: 'rgba(255,255,255,0)',
                paper_bgcolor: 'rgba(255,255,255,0)'
            };

            Plotly.newPlot("plot", [trace], layout, { displayModeBar: true, responsive: true });
        }

        //redraw when control kthings change
        ['groupSelect', 'xSelect', 'ySelect'].forEach(id => {
            const el = document.getElementById(id);
            if (el) el.addEventListener('change', draw);
        });

        loadData();


        <!-- JS to highlight current page -->
        const path = location.pathname.split('/').pop() || 'index.html';
        document.querySelectorAll('a[href]').forEach(a => {
            if (a.getAttribute('href') === path) {
                a.classList.add('ring-2', 'ring-[#004a6f]', 'border-[#004a6f]');
            }
        });
    </script>
</body>

</html>